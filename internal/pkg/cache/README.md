# Cache ç¼“å­˜æ¨¡å—

æœ¬æ¨¡å—æä¾›Redisç¼“å­˜ç³»ç»Ÿçš„å°è£…ï¼Œå®ç°äº†å®Œæ•´çš„ç¼“å­˜æ“ä½œã€é”®ç®¡ç†å’ŒTTLç­–ç•¥ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½

- **Redisè¿æ¥ç®¡ç†**ï¼šæ”¯æŒè¿æ¥æ± ã€å¥åº·æ£€æŸ¥ã€è¿æ¥ç»Ÿè®¡
- **ç¼“å­˜æ“ä½œå°è£…**ï¼šæä¾›å®Œæ•´çš„ç¼“å­˜CRUDæ“ä½œ
- **é”®å‘½åè§„èŒƒ**ï¼šç»Ÿä¸€çš„ç¼“å­˜é”®å‘½åæ ‡å‡†å’Œæ„å»ºå™¨
- **TTLç®¡ç†**ï¼šæ™ºèƒ½çš„ç¼“å­˜è¿‡æœŸæ—¶é—´ç®¡ç†
- **æ•°æ®ç»“æ„æ”¯æŒ**ï¼šStringã€Hashã€Setã€ZSetç­‰Redisæ•°æ®ç»“æ„
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡è®¾ç½®å’Œåˆ é™¤æ“ä½œ
- **ç±»å‹å®‰å…¨**ï¼šJSONåºåˆ—åŒ–/ååºåˆ—åŒ–æ”¯æŒ
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯å®šä¹‰å’Œå¤„ç†æœºåˆ¶

## ğŸ“ æ–‡ä»¶ç»“æ„

```
cache/
â”œâ”€â”€ redis.go        # Redisè¿æ¥ç®¡ç†
â”œâ”€â”€ manager.go      # ç¼“å­˜æ“ä½œç®¡ç†å™¨
â”œâ”€â”€ keys.go         # ç¼“å­˜é”®å‘½åè§„èŒƒ
â”œâ”€â”€ ttl.go          # TTLç®¡ç†å’Œç¼“å­˜åŒ…è£…å™¨
â”œâ”€â”€ cache_test.go   # å®Œæ•´çš„å•å…ƒæµ‹è¯•
â””â”€â”€ README.md       # æœ¬æ–‡æ¡£
```

## âš™ï¸ ä½¿ç”¨æ–¹æ³•

### 1. åˆå§‹åŒ–Redisè¿æ¥
```go
if err := cache.InitRedis(); err != nil {
    log.Fatal(err)
}
defer cache.CloseRedis()
```

### 2. åŸºç¡€ç¼“å­˜æ“ä½œ
```go
manager := cache.NewCacheManager()

// è®¾ç½®ç¼“å­˜
err := manager.Set("user:123", userData)

// è·å–ç¼“å­˜
var user User
err = manager.Get("user:123", &user)
```

### 3. ä½¿ç”¨ç¼“å­˜åŒ…è£…å™¨
```go
// ç”¨æˆ·ä¼šè¯ç®¡ç†ï¼ˆè‡ªåŠ¨TTLï¼‰
err := cache.Cache.SetUserSession(token, sessionData)

// æ–‡ä»¶ä¿¡æ¯ç¼“å­˜
err = cache.Cache.SetFileInfo(fileID, fileInfo)

// é™æµæ§åˆ¶
count, err := cache.Cache.IncrementRateLimit(ip, endpoint)
```